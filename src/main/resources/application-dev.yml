quarkus:
  # Mode développement
  live-reload:
    enabled: true

  # Base de données développement
  datasource:
    jdbc:
      url: jdbc:postgresql://localhost:5432/oneeats_dev2
    username: oneeats_user
    password: oneeats_password

  hibernate-orm:
    database:
      generation: drop-and-create
    sql-load-script: import-dev.sql
    log:
      sql: false
      format-sql: true
    statistics: true

  # Logs détaillés
  log:
    level: INFO
    category:
      com.oneeats:
        level: INFO
      org.hibernate.SQL:
        level: INFO

  # Activer l'authentification OIDC pour tester le login
  oidc:
    tenant-enabled: true

  # Routes publiques - pas d'interception OIDC
  http:
    auth:
      permission:
        public-spa:
          paths: /login,/callback,/,/index.html,/assets/*
          policy: permit
          methods: GET

  quinoa:
    # Configuration professionnelle Quinoa + Vite
    enabled: true
    ui-dir: apps/web

    # Configuration dev server
    dev-server:
      port: 5173
      host: localhost
      check-timeout: 30000
      auto-start: true

    # SPA routing pour React Router
    spa-routing: true
    spa-routing-path: "/"
    spa-routing-ignored-paths: "/api/*,/q/*,/health*,/metrics*,/openapi*,/favicon.ico,/ws/*"

    # Build configuration
    build-dir: dist

    # Package manager
    package-manager: npm
    package-manager-install: true

    # Scripts
    dev-script: "dev"
    build-script: "build"

  keycloak:
    policy-enforcer:
      enable: false  # Désactivé - pas de Service Account configuré

# Configuration développement OneEats
oneeats:
  business:
    notification:
      enabled: true
      # En dev, on log seulement
      email-enabled: false
      sms-enabled: false

  debug:
    log-requests: true
    log-responses: true
    fake-data: true  # Pour charger des données de test
