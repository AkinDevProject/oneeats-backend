# =============================================================================
# FLOW 12: Gestion des favoris
# =============================================================================
# Note: L'onglet Favoris est MASQUE de la tab bar (href: null dans _layout.tsx)
# Approche: Utilisation des accessibilityLabel pour le bouton favori
# =============================================================================
appId: com.oneeats.mobile
name: "12 - Favorites Management"
tags:
  - favorites
  - regression

---

# SETUP
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: ".*"
    timeout: 20000

- runFlow:
    when:
      visible: "Continuer sans compte"
    commands:
      - tapOn: "Continuer sans compte"

- extendedWaitUntil:
    visible: ".*proximit.*"
    timeout: 15000

- takeScreenshot: "12-home-for-favorites"

# -----------------------------------------------------------------------------
# TEST 1: Ajouter un restaurant aux favoris via accessibilityLabel
# -----------------------------------------------------------------------------
- scroll

# Le bouton favori a l'accessibilityLabel "Ajouter aux favoris" ou "Retirer des favoris"
- tapOn:
    label: ".*favoris"
    index: 0
    optional: true

- takeScreenshot: "12-favorite-toggled"

# -----------------------------------------------------------------------------
# TEST 2: Acces aux favoris depuis le compte
# -----------------------------------------------------------------------------
- tapOn: "Compte"

- extendedWaitUntil:
    visible: "Compte"
    timeout: 5000

- takeScreenshot: "12-compte-screen"

# Retour accueil
- tapOn: "Accueil"

- extendedWaitUntil:
    visible: ".*proximit.*"
    timeout: 5000

- takeScreenshot: "12-favorites-complete"
