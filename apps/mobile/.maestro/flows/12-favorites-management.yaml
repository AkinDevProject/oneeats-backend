# =============================================================================
# FLOW 12: Gestion des favoris
# =============================================================================
# Note: L'onglet Favoris est MASQUE de la tab bar (href: null dans _layout.tsx)
# Les favoris sont accessibles depuis:
# - Section "Vos Favoris" sur l'accueil (si connecte)
# - Bouton coeur sur chaque carte restaurant (testID="favorite-button")
# =============================================================================
appId: com.oneeats.mobile
name: "12 - Favorites Management"
tags:
  - favorites
  - regression

---

# SETUP
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: ".*"
    timeout: 20000

- runFlow:
    when:
      visible: "Continuer sans compte"
    commands:
      - tapOn: "Continuer sans compte"

- extendedWaitUntil:
    visible: ".*proximit.*"
    timeout: 15000

- takeScreenshot: "12-home-for-favorites"

# -----------------------------------------------------------------------------
# TEST 1: Ajouter un restaurant aux favoris via le bouton coeur
# -----------------------------------------------------------------------------
- scroll

# Taper sur le bouton favori (testID="favorite-button")
- tapOn:
    id: "favorite-button"
    index: 0
    optional: true

- takeScreenshot: "12-favorite-toggled"

# -----------------------------------------------------------------------------
# TEST 2: Acces aux favoris depuis le compte
# -----------------------------------------------------------------------------
- tapOn: "Compte"

- extendedWaitUntil:
    visible: "Compte"
    timeout: 5000

- takeScreenshot: "12-compte-screen"

# Retour accueil
- tapOn: "Accueil"

- extendedWaitUntil:
    visible: ".*proximit.*"
    timeout: 5000

- takeScreenshot: "12-favorites-complete"
