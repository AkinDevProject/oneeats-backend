# =============================================================================
# FLOW 07: Consultation des details d'un restaurant
# =============================================================================
# Approche: Utilisation des accessibilityLabel et selecteurs de position
# Note: Requiert que le backend soit accessible pour charger les restaurants
# =============================================================================
appId: com.oneeats.mobile
name: "07 - Restaurant Details View"
tags:
  - navigation
  - restaurant
  - smoke

---

# SETUP
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: ".*"
    timeout: 45000

- runFlow:
    when:
      visible: "Continuer sans compte"
    commands:
      - tapOn: "Continuer sans compte"

# Attendre l'ecran d'accueil
- extendedWaitUntil:
    visible: "Accueil"
    timeout: 30000

- takeScreenshot: "07-home-screen"

# Attendre que les restaurants se chargent (optionnel)
- extendedWaitUntil:
    visible: ".*"
    timeout: 30000
    optional: true

- takeScreenshot: "07-home-with-restaurants"

# Scroll pour voir les cartes restaurant
- scroll

- takeScreenshot: "07-restaurants-list"

# Taper sur une carte restaurant via son accessibilityLabel
# Format: "Restaurant {nom}" - on utilise un pattern regex
- tapOn:
    label: "Restaurant.*"
    index: 0
    optional: true

- extendedWaitUntil:
    visible: "Menu"
    timeout: 20000
    optional: true

- takeScreenshot: "07-restaurant-details"

# Retour
- back

- extendedWaitUntil:
    visible: "Accueil"
    timeout: 15000

- takeScreenshot: "07-back-to-home"
