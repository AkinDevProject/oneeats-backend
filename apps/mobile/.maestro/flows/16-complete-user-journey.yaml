# =============================================================================
# FLOW 16: Parcours utilisateur complet E2E
# =============================================================================
appId: com.oneeats.mobile
name: "16 - Complete User Journey E2E"
tags:
  - e2e
  - smoke

---

# PHASE 1: Lancement
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: ".*"
    timeout: 15000

- takeScreenshot: "16-e2e-01-start"

# PHASE 2: Skip auth
- runFlow:
    when:
      visible: "Continuer sans compte"
    commands:
      - tapOn: "Continuer sans compte"

# Attendre l'onglet Accueil (plus fiable que le contenu)
- extendedWaitUntil:
    visible: "Accueil"
    timeout: 15000

- takeScreenshot: "16-e2e-02-home"

# PHASE 3: Attendre le chargement des restaurants
- extendedWaitUntil:
    visible: ".*proximit.*"
    timeout: 30000
    optional: true

# PHASE 4: Navigation restaurants
- scroll

- takeScreenshot: "16-e2e-03-scroll"

# PHASE 5: Aller au panier
- tapOn: "Panier"

- extendedWaitUntil:
    visible: "Panier"
    timeout: 5000

- takeScreenshot: "16-e2e-04-cart"

# PHASE 6: Aller au compte
- tapOn: "Compte"

- extendedWaitUntil:
    visible: "Compte"
    timeout: 5000

- takeScreenshot: "16-e2e-05-compte"

# PHASE 7: Retour accueil
- tapOn: "Accueil"

- extendedWaitUntil:
    visible: "Accueil"
    timeout: 5000

- takeScreenshot: "16-e2e-06-final"
